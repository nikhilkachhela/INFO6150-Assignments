// Utilities using interpolation, loops, maps, @each/@for, and @extend
@use "../base/variables";
@use "../utilities/functions";

// Spacing utilities: .m-1, .mt-2, .px-4 etc.
$axes: (m: margin, p: padding);
$dirs: (t: top, r: right, b: bottom, l: left, x: (left, right), y: (top, bottom));

@each $axisKey, $axisVal in $axes {
  @each $sizeKey, $sizeVal in variables.$space-scale {
    .#{$axisKey}-#{$sizeKey} { #{$axisVal}: $sizeVal; }
    @each $dirKey, $dirVal in $dirs {
      @if type-of($dirVal) == list {
        .#{$axisKey}#{$dirKey}-#{$sizeKey} {
          @each $d in $dirVal { #{$axisVal}-#{$d}: $sizeVal; }
        }
      } @else {
        .#{$axisKey}#{$dirKey}-#{$sizeKey} { #{$axisVal}-#{$dirVal}: $sizeVal; }
      }
    }
  }
}

// Gap utilities: .gap-1 ... (demonstrates interpolation)
@each $k, $v in variables.$space-scale {
  .gap-#{$k} { gap: $v; }
}

// Color text utilities using map and @each
@each $name, $val in variables.$colors {
  .text-#{$name} { color: $val; }
  .bg-#{$name} { background-color: $val; }
}

// Simple grid utilities via @for
@for $i from 2 through 4 {
  .cols-#{$i} { display: grid; grid-template-columns: repeat(#{$i}, 1fr); gap: map-get(variables.$space-scale, 6); }
}

// Visually-hidden utility
.visually-hidden {
  position: absolute !important; height: 1px; width: 1px; overflow: hidden;
  clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; margin: -1px;
}
